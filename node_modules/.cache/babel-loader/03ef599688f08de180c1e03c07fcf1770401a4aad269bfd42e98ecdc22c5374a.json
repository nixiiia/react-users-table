{"ast":null,"code":"import React from'react';import{Search}from'./components/Search';import{Table}from'./components/Table';import{Modal}from'./components/Modal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[users,setUsers]=React.useState([]);const[searchTerm,setSearchTerm]=React.useState('');const[sortConfig,setSortConfig]=React.useState({key:'',direction:''});const[selectedUser,setSelectedUser]=React.useState(null);const fetchUsers=async()=>{try{const response=await fetch(`https://dummyjson.com/users/search?q=${searchTerm}`);const data=await response.json();setUsers(data.users);console.log(users);}catch(error){console.error('Error fetching users:',error);}};React.useEffect(()=>{fetchUsers();},[searchTerm]);const handleSearch=event=>{setSearchTerm(event.target.value);};const handleSort=key=>{let direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'){direction='descending';}else if(sortConfig.key===key&&sortConfig.direction==='descending'){direction='none';}setSortConfig({key,direction});};const sortedUsers=()=>{let sortableUsers=[...users];if(sortConfig.key&&sortConfig.direction!=='none'){sortableUsers.sort((a,b)=>{const aKey=getKey(a,sortConfig.key);const bKey=getKey(b,sortConfig.key);if(aKey<bKey){return sortConfig.direction==='ascending'?-1:1;}if(aKey>bKey){return sortConfig.direction==='ascending'?1:-1;}return 0;});}return sortableUsers;};const getKey=(obj,key)=>{return key.split('.').reduce((o,k)=>o&&o[k]?o[k]:'',obj);};const handleUserClick=user=>{setSelectedUser(user);};const handleCloseModal=()=>{setSelectedUser(null);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Search,{searchTerm:searchTerm,handleSearch:handleSearch}),/*#__PURE__*/_jsx(Table,{users:sortedUsers(),handleSort:handleSort,sortConfig:sortConfig,onClickUser:handleUserClick}),selectedUser&&/*#__PURE__*/_jsx(Modal,{user:selectedUser,onClose:handleCloseModal})]});}export default App;","map":{"version":3,"names":["React","Search","Table","Modal","jsx","_jsx","jsxs","_jsxs","App","users","setUsers","useState","searchTerm","setSearchTerm","sortConfig","setSortConfig","key","direction","selectedUser","setSelectedUser","fetchUsers","response","fetch","data","json","console","log","error","useEffect","handleSearch","event","target","value","handleSort","sortedUsers","sortableUsers","sort","a","b","aKey","getKey","bKey","obj","split","reduce","o","k","handleUserClick","user","handleCloseModal","className","children","onClickUser","onClose"],"sources":["C:/Users/Марк/Documents/GitHub/react-users-table/src/App.js"],"sourcesContent":["import React from 'react';\n\n\nimport { Search } from './components/Search';\nimport { Table } from './components/Table';\nimport { Modal } from './components/Modal';\n\nfunction App() {\n  const [users, setUsers] = React.useState([]);\n  const [searchTerm, setSearchTerm] = React.useState('');\n  const [sortConfig, setSortConfig] = React.useState({ key: '', direction: '' });\n  const [selectedUser, setSelectedUser] = React.useState(null);\n\n  const fetchUsers = async () => {\n    try {\n      const response = await fetch(`https://dummyjson.com/users/search?q=${searchTerm}`);\n      const data = await response.json();\n      setUsers(data.users);\n      console.log(users);\n    } catch (error) {\n      console.error('Error fetching users:', error);\n    }\n  };\n\n  React.useEffect(() => {\n    fetchUsers();\n  }, [searchTerm]);\n\n  const handleSearch = (event) => {\n    setSearchTerm(event.target.value);\n  };\n\n  const handleSort = (key) => {\n    let direction = 'ascending';\n    if (sortConfig.key === key && sortConfig.direction === 'ascending') {\n      direction = 'descending';\n    } else if (sortConfig.key === key && sortConfig.direction === 'descending') {\n      direction = 'none';\n    }\n    setSortConfig({ key, direction });\n  };\n\n  const sortedUsers = () => {\n    let sortableUsers = [...users];\n    if (sortConfig.key && sortConfig.direction !== 'none') {\n      sortableUsers.sort((a, b) => {\n        const aKey = getKey(a, sortConfig.key);\n        const bKey = getKey(b, sortConfig.key);\n        if (aKey < bKey) {\n          return sortConfig.direction === 'ascending' ? -1 : 1;\n        }\n        if (aKey > bKey) {\n          return sortConfig.direction === 'ascending' ? 1 : -1;\n        }\n        return 0;\n      });\n    }\n    return sortableUsers;\n  };\n\n  const getKey = (obj, key) => {\n    return key.split('.').reduce((o, k) => (o && o[k] ? o[k] : ''), obj);\n  };\n\n  const handleUserClick = (user) => {\n    setSelectedUser(user);\n  };\n\n  const handleCloseModal = () => {\n    setSelectedUser(null);\n  };\n\n  return (\n    <div className=\"App\">\n      <Search searchTerm={searchTerm} handleSearch={handleSearch} />\n      <Table\n        users={sortedUsers()}\n        handleSort={handleSort}\n        sortConfig={sortConfig}\n        onClickUser={handleUserClick}\n      />\n      {selectedUser && <Modal user={selectedUser} onClose={handleCloseModal} />}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}